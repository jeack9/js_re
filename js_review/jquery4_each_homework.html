<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jquery4_each_homework</title>
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<body>
  <div>
    <button class="dec">-</button>
    <input type="text" value="1" size="3">
    <button class="inc">+</button>
    <span>200</span><br>
  </div>
  <div>
    <button class="dec">-</button>
    <input type="text" value="1" size="3">
    <button class="inc">+</button>
    <span>100</span><br>
  </div>
  <div>
    <button class="dec">-</button>
    <input type="text" value="1" size="3">
    <button class="inc">+</button>
    <span>500</span><br>
  </div>
  <div></div>
  <script>
    // input value 합산 => div 추가
    // jqueryTotal();
    changeCnt();
    jqueryTotal();
    function changeCnt(){
      $("button").on("click", () =>{        
        let $btn = $(event.target);        
        if($btn.hasClass("inc")){ // 더하기
          console.log("더하기");
          let cnt = $btn.prev().val();
          cnt = Number(cnt) + 1;
          $btn.prev().val(cnt);
        }else{ // 빼기
          let cnt = $btn.next().val();
          if(cnt <= 0 ) return;
          cnt = Number(cnt) - 1;
          $btn.next().val(cnt);
        }
        jqueryTotal();
      });
    }
    // jquery
    function jqueryTotal(){
      let sum = 0;
      $("input").each((idx, item) =>{
        let $cnt = $(item).val();        
        sum += $cnt * $(item).next().next().html();
      });
      $("div").last().html(sum);
    }
  </script>
</body>
</html>